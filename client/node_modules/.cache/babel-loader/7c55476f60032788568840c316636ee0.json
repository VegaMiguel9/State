{"ast":null,"code":"import _objectSpread from\"/Users/vega/bootcamp/hw/State/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from\"react\";import{Link}from\"react-router-dom\";import{pluralize}from\"../../utils/helpers\";import{ADD_TO_CART,UPDATE_CART_QUANTITY}from'../../utils/actions';import{idbPromise}from\"../../utils/helpers\";import{useDispatch,useSelector}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductItem(item){var state=useSelector(function(state){return state;});var dispatch=useDispatch();var cart=state.cart;var addToCart=function addToCart(){var itemInCart=cart.find(function(cartItem){return cartItem._id===_id;});if(itemInCart){dispatch({type:UPDATE_CART_QUANTITY,_id:_id,purchaseQuantity:parseInt(itemInCart.purchaseQuantity)+1});idbPromise('cart','put',_objectSpread(_objectSpread({},itemInCart),{},{purchaseQuantity:parseInt(itemInCart.purchaseQuantity)+1}));}else{dispatch({type:ADD_TO_CART,product:_objectSpread(_objectSpread({},item),{},{purchaseQuantity:1})});idbPromise('cart','put',_objectSpread(_objectSpread({},item),{},{purchaseQuantity:1}));}};var image=item.image,name=item.name,_id=item._id,price=item.price,quantity=item.quantity;return/*#__PURE__*/_jsxs(\"div\",{className:\"card px-1 py-1\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/products/\".concat(_id),children:[/*#__PURE__*/_jsx(\"img\",{alt:name,src:\"/images/\".concat(image)}),/*#__PURE__*/_jsx(\"p\",{children:name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[quantity,\" \",pluralize(\"item\",quantity),\" in stock\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",price]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addToCart,children:\"Add to cart\"})]});}export default ProductItem;","map":{"version":3,"names":["React","Link","pluralize","ADD_TO_CART","UPDATE_CART_QUANTITY","idbPromise","useDispatch","useSelector","jsx","_jsx","jsxs","_jsxs","ProductItem","item","state","dispatch","cart","addToCart","itemInCart","find","cartItem","_id","type","purchaseQuantity","parseInt","_objectSpread","product","image","name","price","quantity","className","children","to","concat","alt","src","onClick"],"sources":["/Users/vega/bootcamp/hw/State/client/src/components/ProductItem/index.js"],"sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { pluralize } from \"../../utils/helpers\";\nimport { ADD_TO_CART, UPDATE_CART_QUANTITY} from '../../utils/actions';\nimport { idbPromise } from \"../../utils/helpers\";\nimport { useDispatch, useSelector } from 'react-redux';\n\nfunction ProductItem(item) {\n\n  const state = useSelector((state) => {\n    return state\n  });\n  const dispatch = useDispatch();\n\n  const { cart } = state;\n\n\n  const addToCart = () => {\n    const itemInCart = cart.find((cartItem) => cartItem._id === _id)\n    if (itemInCart) {\n      dispatch({\n        type: UPDATE_CART_QUANTITY,\n        _id: _id,\n        purchaseQuantity: parseInt(itemInCart.purchaseQuantity) + 1\n      });\n      idbPromise('cart', 'put', {\n        ...itemInCart,\n        purchaseQuantity: parseInt(itemInCart.purchaseQuantity) + 1\n      });\n    } else {\n      dispatch({\n        type: ADD_TO_CART,\n        product: { ...item, purchaseQuantity: 1 }\n      });\n      idbPromise('cart', 'put', { ...item, purchaseQuantity: 1 });\n    }\n  }\n\n\n\n  const {\n    image,\n    name,\n    _id,\n    price,\n    quantity\n  } = item;\n\n\n\n\n  return (\n    <div className=\"card px-1 py-1\">\n      <Link to={`/products/${_id}`}>\n        <img\n          alt={name}\n          src={`/images/${image}`}\n        />\n        <p>{name}</p>\n      </Link>\n      <div>\n        <div>{quantity} {pluralize(\"item\", quantity)} in stock</div>\n        <span>${price}</span>\n      </div>\n      <button onClick={addToCart}>Add to cart</button>\n    </div>\n  );\n}\n\nexport default ProductItem;"],"mappings":"yHAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,SAAS,KAAQ,qBAAqB,CAC/C,OAASC,WAAW,CAAEC,oBAAoB,KAAO,qBAAqB,CACtE,OAASC,UAAU,KAAQ,qBAAqB,CAChD,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEvD,QAAS,CAAAC,WAAWA,CAACC,IAAI,CAAE,CAEzB,GAAM,CAAAC,KAAK,CAAGP,WAAW,CAAC,SAACO,KAAK,CAAK,CACnC,MAAO,CAAAA,KAAK,CACd,CAAC,CAAC,CACF,GAAM,CAAAC,QAAQ,CAAGT,WAAW,EAAE,CAE9B,GAAQ,CAAAU,IAAI,CAAKF,KAAK,CAAdE,IAAI,CAGZ,GAAM,CAAAC,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAA,CAAS,CACtB,GAAM,CAAAC,UAAU,CAAGF,IAAI,CAACG,IAAI,CAAC,SAACC,QAAQ,QAAK,CAAAA,QAAQ,CAACC,GAAG,GAAKA,GAAG,GAAC,CAChE,GAAIH,UAAU,CAAE,CACdH,QAAQ,CAAC,CACPO,IAAI,CAAElB,oBAAoB,CAC1BiB,GAAG,CAAEA,GAAG,CACRE,gBAAgB,CAAEC,QAAQ,CAACN,UAAU,CAACK,gBAAgB,CAAC,CAAG,CAC5D,CAAC,CAAC,CACFlB,UAAU,CAAC,MAAM,CAAE,KAAK,CAAAoB,aAAA,CAAAA,aAAA,IACnBP,UAAU,MACbK,gBAAgB,CAAEC,QAAQ,CAACN,UAAU,CAACK,gBAAgB,CAAC,CAAG,CAAC,GAC3D,CACJ,CAAC,IAAM,CACLR,QAAQ,CAAC,CACPO,IAAI,CAAEnB,WAAW,CACjBuB,OAAO,CAAAD,aAAA,CAAAA,aAAA,IAAOZ,IAAI,MAAEU,gBAAgB,CAAE,CAAC,EACzC,CAAC,CAAC,CACFlB,UAAU,CAAC,MAAM,CAAE,KAAK,CAAAoB,aAAA,CAAAA,aAAA,IAAOZ,IAAI,MAAEU,gBAAgB,CAAE,CAAC,GAAG,CAC7D,CACF,CAAC,CAID,GACE,CAAAI,KAAK,CAKHd,IAAI,CALNc,KAAK,CACLC,IAAI,CAIFf,IAAI,CAJNe,IAAI,CACJP,GAAG,CAGDR,IAAI,CAHNQ,GAAG,CACHQ,KAAK,CAEHhB,IAAI,CAFNgB,KAAK,CACLC,QAAQ,CACNjB,IAAI,CADNiB,QAAQ,CAMV,mBACEnB,KAAA,QAAKoB,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BrB,KAAA,CAACV,IAAI,EAACgC,EAAE,cAAAC,MAAA,CAAeb,GAAG,CAAG,CAAAW,QAAA,eAC3BvB,IAAA,QACE0B,GAAG,CAAEP,IAAK,CACVQ,GAAG,YAAAF,MAAA,CAAaP,KAAK,CAAG,EACxB,cACFlB,IAAA,MAAAuB,QAAA,CAAIJ,IAAI,EAAK,GACR,cACPjB,KAAA,QAAAqB,QAAA,eACErB,KAAA,QAAAqB,QAAA,EAAMF,QAAQ,CAAC,GAAC,CAAC5B,SAAS,CAAC,MAAM,CAAE4B,QAAQ,CAAC,CAAC,WAAS,GAAM,cAC5DnB,KAAA,SAAAqB,QAAA,EAAM,GAAC,CAACH,KAAK,GAAQ,GACjB,cACNpB,IAAA,WAAQ4B,OAAO,CAAEpB,SAAU,CAAAe,QAAA,CAAC,aAAW,EAAS,GAC5C,CAEV,CAEA,cAAe,CAAApB,WAAW"},"metadata":{},"sourceType":"module"}